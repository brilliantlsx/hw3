clc;clear all;
%读取图像和调色板数据
[s{1},map{1}]=imread('citywall1.bmp');
[s{2},map{2}]=imread('citywall2.bmp');
[s{3},map{3}]=imread('elain1.bmp');
[s{4},map{4}]=imread('elain2.bmp');
[s{5},map{5}]=imread('elain3.bmp');
[s{6},map{6}]=imread('lena1.bmp');
[s{7},map{7}]=imread('lena2.bmp');
[s{8},map{8}]=imread('lena4.bmp');
[s{9},map{9}]=imread('woman1.bmp');
[s{10},map{10}]=imread('woman2.bmp');
[y{1},map2{1}]=imread('citywall.bmp');
[y{2},map2{2}]=imread('elain.bmp');
[y{3},map2{3}]=imread('lena.bmp');
[y{4},map2{4}]=imread('woman.bmp');
%转换为灰度图
for i=1:10
    g{i}=ind2gray(s{i},map{i});
end
for i=1:4
    g2{i}=ind2gray(y{i},map2{i});
    h{i}=imhist(g2{i});
end
r{1}=histeq(g{1},h{1});
r{2}=histeq(g{2},h{1});
r{3}=histeq(g{3},h{2});
r{4}=histeq(g{4},h{2});
r{5}=histeq(g{5},h{2});
r{6}=histeq(g{6},h{3});
r{7}=histeq(g{7},h{3});
r{8}=histeq(g{8},h{3});
r{9}=histeq(g{9},h{4});
r{10}=histeq(g{10},h{4});

figure(1)
subplot(2,3,1)
imshow(g{1});title('citywall1');
subplot(2,3,2)
imshow(g2{1});title('citywall');
subplot(2,3,3)
imshow(r{1});title('匹配后citywall1');
subplot(2,3,4)
imhist(g{1});title('对应直方图');
subplot(2,3,5)
imhist(g2{1});title('对应直方图');
subplot(2,3,6)
imhist(r{1});title('对应直方图');

figure(2)
subplot(2,3,1)
imshow(g{2});title('citywall2');
subplot(2,3,2)
imshow(g2{1});title('citywall');
subplot(2,3,3)
imshow(r{2});title('匹配后citywall2');
subplot(2,3,4)
imhist(g{2});title('对应直方图');
subplot(2,3,5)
imhist(g2{1});title('对应直方图');
subplot(2,3,6)
imhist(r{2});title('对应直方图');

figure(3)
subplot(2,3,1)
imshow(g{3});title('elain1');
subplot(2,3,2)
imshow(g2{2});title('elain');
subplot(2,3,3)
imshow(r{3});title('匹配后elain1');
subplot(2,3,4)
imhist(g{3});title('对应直方图');
subplot(2,3,5)
imhist(g2{2});title('对应直方图');
subplot(2,3,6)
imhist(r{3});title('对应直方图');

figure(4)
subplot(2,3,1)
imshow(g{4});title('elain2');
subplot(2,3,2)
imshow(g2{2});title('elain');
subplot(2,3,3)
imshow(r{4});title('匹配后elain2');
subplot(2,3,4)
imhist(g{4});title('对应直方图');
subplot(2,3,5)
imhist(g2{2});title('对应直方图');
subplot(2,3,6)
imhist(r{4});title('对应直方图');

figure(5)
subplot(2,3,1)
imshow(g{5});title('elain3');
subplot(2,3,2)
imshow(g2{2});title('elain');
subplot(2,3,3)
imshow(r{5});title('匹配后elain3');
subplot(2,3,4)
imhist(g{5});title('对应直方图');
subplot(2,3,5)
imhist(g2{2});title('对应直方图');
subplot(2,3,6)
imhist(r{5});title('对应直方图');

figure(6)
subplot(2,3,1)
imshow(g{6});title('lena1');
subplot(2,3,2)
imshow(g2{3});title('lena');
subplot(2,3,3)
imshow(r{6});title('匹配后lena1');
subplot(2,3,4)
imhist(g{6});title('对应直方图');
subplot(2,3,5)
imhist(g2{3});title('对应直方图');
subplot(2,3,6)
imhist(r{6});title('对应直方图');

figure(7)
subplot(2,3,1)
imshow(g{7});title('lena2');
subplot(2,3,2)
imshow(g2{3});title('lena');
subplot(2,3,3)
imshow(r{7});title('匹配后lena2');
subplot(2,3,4)
imhist(g{7});title('对应直方图');
subplot(2,3,5)
imhist(g2{3});title('对应直方图');
subplot(2,3,6)
imhist(r{7});title('对应直方图');

figure(8)
subplot(2,3,1)
imshow(g{8});title('lena4');
subplot(2,3,2)
imshow(g2{3});title('lena');
subplot(2,3,3)
imshow(r{8});title('匹配后lena4');
subplot(2,3,4)
imhist(g{8});title('对应直方图');
subplot(2,3,5)
imhist(g2{3});title('对应直方图');
subplot(2,3,6)
imhist(r{8});title('对应直方图');

figure(9)
subplot(2,3,1)
imshow(g{9});title('woman1');
subplot(2,3,2)
imshow(g2{4});title('woman');
subplot(2,3,3)
imshow(r{9});title('匹配后woman1');
subplot(2,3,4)
imhist(g{9});title('对应直方图');
subplot(2,3,5)
imhist(g2{4});title('对应直方图');
subplot(2,3,6)
imhist(r{9});title('对应直方图');

figure(10)
subplot(2,3,1)
imshow(g{10});title('woman2');
subplot(2,3,2)
imshow(g2{4});title('woman');
subplot(2,3,3)
imshow(r{10});title('匹配后woman2');
subplot(2,3,4)
imhist(g{10});title('对应直方图');
subplot(2,3,5)
imhist(g2{4});title('对应直方图');
subplot(2,3,6)
imhist(r{10});title('对应直方图');